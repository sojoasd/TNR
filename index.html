<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style>
        #map {
          width: 100%;
          height: 600px;
          background-color: grey;
        }
    </style>
    </head>
    <body>
        <h3>My Google Maps Demo</h3>
        <!--The div element for the map -->
        <div id="map"></div>
        <script>
            // Initialize and add the map
            function initMap() {
                var center = {lat: 34.052235, lng: -118.243683};
                var locations = [
                    ['Philz Coffee<br>\
                    801 S Hope St A, Los Angeles, CA 90017<br>\
                <img src="https://ccu-cloud-dev.s3-ap-southeast-1.amazonaws.com/atr-user-document/iMuHV38nVptRu3GJFNNSnu/iMuHV38nVptRu3GJFNNSnu_IDENTIFY_CARD.jpg" height="30" width="30">',   34.046438, -118.259653],
                    ['Philz Coffee<br>\
                    525 Santa Monica Blvd, Santa Monica, CA 90401<br>\
                    <img src="/img/IMG_6449.JPG" height="30" width="30">', 34.017951, -118.493567],
                    ['Philz Coffee<br>\
                    146 South Lake Avenue #106, At Shoppers Lane, Pasadena, CA 91101<br>\
                    <img src="/img/IMG_6449.JPG" height="30" width="30">', 34.143073, -118.132040],
                    ['Philz Coffee<br>\
                    21016 Pacific Coast Hwy, Huntington Beach, CA 92648<br>\
                    <img src="/img/IMG_6449.JPG" height="30" width="30">', 33.655199, -117.998640],
                    ['Philz Coffee<br>\
                    252 S Brand Blvd, Glendale, CA 91204<br>\
                    <img src="/img/IMG_6449.JPG" height="30" width="30">', 34.142823, -118.254569]
                ];

                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 9,
                    center: center
                });
                var infowindow =  new google.maps.InfoWindow({});
                var marker, count;
                for (count = 0; count < locations.length; count++) {
                    marker = new google.maps.Marker({
                        position: new google.maps.LatLng(locations[count][1], locations[count][2]),
                        map: map,
                        title: locations[count][0]
                    });

                    google.maps.event.addListener(marker, 'click', (function (marker, count) {
                        return function () {
                            const position = new google.maps.LatLng(33.142821, -117.998632);
                            marker.setPosition(position);
                            infowindow.setContent(locations[count][0]);
                            infowindow.open(map, marker);
                        }
                    })(marker, count));

                    // google.maps.event.addListener(marker, 'dblclick', (function (marker, count) {
                    //     return function () {
                    //         console.log({marker, count})
                    //         // marker.setMap(null);
                    //         const position = new google.maps.LatLng(33.655333, -117.998641);
                    //         marker.setPosition(position);
                    //     }
                    // })(marker, count));
                }
            }
        </script>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3RFJi67wKgdex3zcdwtsm-E1G3KeNFh4&callback=initMap">
        </script>
    </body>
</html>